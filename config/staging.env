# Staging Environment Configuration
# This file defines ALL environment variables for staging deployment
# Used by: GitHub Actions CI/CD for staging environment
#
# ⚠️  DO NOT put sensitive values (passwords, API keys) in this file!
# ⚠️  Sensitive values are managed in GCP Secret Manager
#
# Last Updated: October 27, 2025

# ============================================
# Core Application Configuration
# ============================================

NODE_ENV=staging
# PORT=8080  # ⚠️ Cloud Run sets this automatically - DO NOT specify here

# ============================================
# Database Configuration (PostgreSQL)
# ============================================

# Staging database (separate from production)
DB_USER=app-user-staging
DB_HOST=/cloudsql/docmosis-tornado:us-central1:legal-forms-db-staging
DB_NAME=legal_forms_db_staging
DB_PORT=5432

# ============================================
# Python Normalization Pipeline Configuration
# ============================================

# Staging pipeline service
PIPELINE_API_URL=https://python-pipeline-staging-945419684329.us-central1.run.app
PIPELINE_API_ENABLED=true
PIPELINE_API_TIMEOUT=300000
PIPELINE_API_KEY=
EXECUTE_PIPELINE_ON_SUBMIT=true
CONTINUE_ON_PIPELINE_FAILURE=true

# ============================================
# Dropbox Configuration
# ============================================

# Staging uses separate Dropbox folder
DROPBOX_ENABLED=true
DROPBOX_BASE_PATH=/Current Clients/STAGING
LOCAL_OUTPUT_PATH=webhook_documents
CONTINUE_ON_DROPBOX_FAILURE=true

# ============================================
# Email Notification Configuration
# ============================================

# Staging emails have [STAGING] prefix
EMAIL_PROVIDER=sendgrid
EMAIL_FROM_ADDRESS=staging-notifications@liptonlegal.com
EMAIL_FROM_NAME=Lipton Legal [STAGING]
EMAIL_ENABLED=true
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY_MS=1000

# ============================================
# Google Cloud Platform Configuration
# ============================================

GCLOUD_PROJECT=docmosis-tornado
GCS_BUCKET_NAME=docmosis-tornado-form-submissions-staging

# ============================================
# Docmosis Document Generation
# ============================================

# Docmosis API endpoint (internal VM)
# Shared between staging and production for document generation
DOCMOSIS_API_URL=http://10.128.0.3:8080/api/render
DOCMOSIS_ENABLED=true

# ============================================
# Notes
# ============================================
# Staging environment mirrors production but uses separate:
# - Database instances
# - Dropbox folders
# - Email addresses (with [STAGING] prefix)
# - Storage buckets
#
# This allows safe testing without affecting production data
