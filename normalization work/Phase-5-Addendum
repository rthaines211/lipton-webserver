| Field | Description | How it populates | Change Note |
|---|---|---|---|
| **HeadOfHousehold** | The full name of the current HOH being processed. Pulled from the normalized plaintiff list. | Set in the per-HOH loop inside `build_dataset_for_hoh()`/`prepare_cleaned_dataset()` and copied onto each set in `split_into_sets()` from the working `dataset["HeadOfHousehold"]`. If no explicit HOH is marked, defaults to first plaintiff after `normalize_input()`. | — |
| **TargetDefendant** | The name of the defendant currently being targeted in that loop. If there’s no specific target, defaults to “AllDefendants”. | Assigned during the defendant iteration (owner/manager/all) and carried into each set by `split_into_sets()` from `dataset["TargetDefendant"]`. If `TargetDefendantName` not provided, script uses “AllDefendants”. | — |
| **SetNumber** | The numeric set index (e.g., 1, 2, 3). | Calculated in `split_into_sets()` as the 1-based index while packing flags into buckets that respect `max_interrogatories`. | **Change:** variable `set_number` → key `SetNumber` |
| **SetNoWrite** | The same as SetNumber, but written out as text (“One”, “Two”, etc.) for Docmosis template use. | Derived from `SetNumber` via a small number-to-words helper (e.g., `to_words()` or map dict) inside `split_into_sets()` before composing the set payload. | — |
| **InterrogatoryStart** | The running starting interrogatory number for that set (e.g., 1, 121, 241, …). | Tracked incrementally in `split_into_sets()` as items are packed; the first set starts at 1 and each subsequent set’s start is previous `SetEnd + 1`. | **Change:** variable `interrogatory_start` → key `InterrogatoryStart` |
| **InterrogatoryCount** | Count of interrogatories included in that set. | Computed at the end of assembling each set (size of the grouped items) in `split_into_sets()`. | **Change:** variable `total_interrogatories` → key `InterrogatoryCount` |
| **SetLabel** | Formatted like “Set 1 of 3”. | Built in `split_into_sets()` using `SetNumber` and total set count after packing (e.g., `f"Set {i} of {total}"`). | — |
| **SetStart / SetEnd** | The range of interrogatory numbers for that set. | `SetStart` is `InterrogatoryStart`; `SetEnd` is `InterrogatoryStart + InterrogatoryCount - 1`, both assigned in `split_into_sets()`. | — |
| **Case.FilingCounty** | Nested under "Case", copied from the base dataset. | Bubbled up from normalized input (`normalize_input()` / `prepare_cleaned_dataset()`), then merged onto each set in `split_into_sets()` via `set_payload["Case"] = {"FilingCounty": dataset["Case"]["FilingCounty"], ...}`. | — |
| **Case.FullAddress** | Cleaned “Street + Unit + City + ZIP” string generated by ensure_unit_in_address(). | Generated once in `ensure_unit_in_address()` during dataset prep and injected per set in `split_into_sets()` as `set_payload["Case"]["FullAddress"]`. | — |
| **AllPlaintiffsUpperWithTypes** | Combined uppercase list of all plaintiffs with their types (e.g., "JOHN DOE (Tenant)"). | Constructed in `flatten_discovery()`/dataset prep by joining normalized plaintiffs, uppercasing + adding role/type; copied directly into each set by `split_into_sets()` from `dataset["AllPlaintiffsUpperWithTypes"]`. | — |
| **AllDefendantsUpperWithTypes** | Same structure for defendants. | Built alongside plaintiffs (owner/manager tags set by role flags) during dataset prep; copied per set in `split_into_sets()` from `dataset["AllDefendantsUpperWithTypes"]`. | — |
| **Plaintiffs** | Array of plaintiff objects with {"name": ...} entries, preserved from the cleaned dataset. | Preserved from `normalize_input()` → `prepare_cleaned_dataset()` as `dataset["Plaintiffs"]` and attached verbatim to each set in `split_into_sets()`. | — |