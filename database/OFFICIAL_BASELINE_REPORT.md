# Official Baseline Taxonomy Report
**Date:** 2025-10-07
**Status:** ✅ Complete
**Source:** [Baseline Option.md](Baseline%20Option.md)

---

## Executive Summary

Successfully normalized the issue taxonomy to match the **official 19-category baseline** exactly as defined in `Baseline Option.md`. All categories and options have been loaded with exact spelling, capitalization, and structure.

---

## Final Taxonomy Structure

### Overview

| Metric | Count |
|--------|-------|
| **Total Categories** | 19 |
| **Total Options** | 131 |
| **Source Document** | Baseline Option.md |
| **Format** | Title Case categories, exact option text |

### Complete Category Breakdown

| # | Category | Code | Options | Notes |
|---|----------|------|---------|-------|
| 1 | Vermin | `vermin` | 6 | Rats/Mice, Skunks, Bats, Raccoons, Pigeons, Opossums |
| 2 | Insects | `insects` | 10 | Ants, Roaches, Flies, Bedbugs, Wasps, Hornets, Spiders, Termites, Mosquitos, Bees |
| 3 | HVAC | `hvac` | 3 | Air Conditioner, Heater, Ventilation |
| 4 | Electrical | `electrical` | 7 | Outlets, Panel, Wall Switches, Exterior/Interior Lighting, Fixtures, Fans |
| 5 | Fire Hazard | `fire_hazard` | 5 | Smoke Alarms, Fire Extinguisher, Non-compliant electricity, Non-GFI outlets, CO detectors |
| 6 | Government Entities Contacted | `government_entities` | 7 | Health, Police, Housing Authority, Environmental Health, Code Enforcement, Health Services, Fire |
| 7 | Appliances | `appliances` | 7 | Stove, Dishwasher, Washer/Dryer, Oven, Microwave, Garbage Disposal, Refrigerator |
| 8 | Plumbing | `plumbing` | 8 | Toilet, Water pressure, Clogs, Hot/Cold water, Sewage, Clean water, Unsanitary water |
| 9 | Cabinets | `cabinets` | 3 | Broken, Hinges, Alignment |
| 10 | Flooring | `flooring` | 4 | Uneven, Carpet, Nails sticking out, Tiles |
| 11 | Windows | `windows` | 6 | Broken, Screens, Leaks, Do not lock, Missing windows, Broken/missing screens |
| 12 | Doors | `doors` | 8 | Broken, Knobs, Locks, Broken hinges, Sliding glass, Waterproofing, Water intrusion, Won't close |
| 13 | Structure | `structure` | 15 | Ceiling/wall issues, Paint, Deck/porch, Waterproofing, Staircase, Basement flood, Garage leaks |
| 14 | Common Areas | `common_areas` | 16 | Mailbox, Parking, Flooding, Pool, Jacuzzi, Laundry, Gym, Elevator, Filth, Vermin, Insects, Gate |
| 15 | Trash Problems | `trash_problems` | 2 | Inadequate receptacles, Properly servicing/emptying receptacles |
| 16 | Nuisance | `nuisance` | 4 | Drugs, Smoking, Noisy neighbors, Gangs |
| 17 | Health Hazard | `health_hazard` | 8 | Mold, Mildew, Mushrooms, Raw sewage, Noxious fumes, Chemical/Paint contamination, Toxic water, Offensive odors |
| 18 | Safety | `safety` | 6 | Broken security gate, Broken doors, Unauthorized entries, Broken buzzer, Security cameras, Inoperable locks |
| 19 | Notices | `notices` | 6 | 3-day, 24-hour, 30-day, 60-day, To quit, Perform or quit |

---

## Detailed Option Lists

### 1. Vermin (6 options)
```
1. Rats/Mice
2. Skunks
3. Bats
4. Raccoons
5. Pigeons
6. Opossums
```

### 2. Insects (10 options)
```
1. Ants
2. Roaches
3. Flies
4. Bedbugs
5. Wasps
6. Hornets
7. Spiders
8. Termites
9. Mosquitos
10. Bees
```

### 3. HVAC (3 options)
```
1. Air Conditioner
2. Heater
3. Ventilation
```

### 4. Electrical (7 options)
```
1. Outlets
2. Panel
3. Wall Switches
4. Exterior Lighting
5. Interior Lighting
6. Light Fixtures
7. Fans
```

### 5. Fire Hazard (5 options)
```
1. Smoke Alarms
2. Fire Extinguisher
3. Non-compliant electricity
4. Non-GFI outlets near water
5. Carbon monoxide detectors
```

### 6. Government Entities Contacted (7 options)
```
1. Health Department
2. Police Department
3. Housing Authority
4. Department of Environmental Health
5. Code Enforcement
6. Department of Health Services
7. Fire Department
```

### 7. Appliances (7 options)
```
1. Stove
2. Dishwasher
3. Washer/Dryer
4. Oven
5. Microwave
6. Garbage Disposal
7. Refrigerator
```

### 8. Plumbing (8 options)
```
1. Toilet
2. Insufficient water pressure
3. Clogged bath/shower/sink/toilet
4. No hot water
5. No cold water
6. Sewage coming out
7. No clean water supply
8. Unsanitary water
```

### 9. Cabinets (3 options)
```
1. Broken
2. Hinges
3. Alignment
```

### 10. Flooring (4 options)
```
1. Uneven
2. Carpet
3. Nails sticking out
4. Tiles
```

### 11. Windows (6 options)
```
1. Broken
2. Screens
3. Leaks
4. Do not lock
5. Missing windows
6. Broken or missing screens
```

### 12. Doors (8 options)
```
1. Broken
2. Knobs
3. Locks
4. Broken hinges
5. Sliding glass doors
6. Ineffective waterproofing
7. Water intrusion and/or insects
8. Do not close properly
```

### 13. Structure (15 options)
```
1. Bumps in ceiling
2. Hole in ceiling
3. Water stains on ceiling
4. Water stains on wall
5. Hole in wall
6. Paint
7. Exterior deck/porch
8. Waterproof toilet
9. Waterproof tub
10. Staircase
11. Basement flood
12. Leaks in garage
13. Soft spots due to leaks
14. Ineffective waterproofing of the tubs or toilet
15. Ineffective weatherproofing of any windows or doors
```

### 14. Common Areas (16 options)
```
1. Mailbox broken
2. Parking area issues
3. Damage to cars
4. Flooding
5. Entrances blocked
6. Swimming pool
7. Jacuzzi
8. Laundry room
9. Recreation room
10. Gym
11. Elevator
12. Filth/Rubbish/Garbage
13. Vermin
14. Insects
15. Broken gate
16. Blocked areas/doors
```

### 15. Trash Problems (2 options)
```
1. Inadequate number of receptacles
2. Properly servicing and emptying receptacles
```

### 16. Nuisance (4 options)
```
1. Drugs
2. Smoking
3. Noisy neighbors
4. Gangs
```

### 17. Health Hazard (8 options)
```
1. Mold
2. Mildew
3. Mushrooms
4. Raw sewage on exterior
5. Noxious fumes
6. Chemical/Paint contamination
7. Toxic water pollution
8. Offensive odors
```

### 18. Safety (6 options)
```
1. Broken/Inoperable security gate
2. Broken doors
3. Unauthorized entries
4. Broken buzzer to get in
5. Security cameras
6. Inoperable locks
```

### 19. Notices (6 options)
```
1. 3-day
2. 24-hour
3. 30-day
4. 60-day
5. To quit
6. Perform or quit
```

---

## Verification Results

### ✅ Quality Checks

| Check | Expected | Actual | Status |
|-------|----------|--------|--------|
| Total Categories | 19 | 19 | ✅ Pass |
| Total Options | 131 | 131 | ✅ Pass |
| Category Names | Title Case | Title Case | ✅ Pass |
| Option Text | Exact match | Exact match | ✅ Pass |
| Display Order | 1-19 | 1-19 | ✅ Pass |

### Known "Duplicates" (Intentional)

The option name **"Broken"** appears 3 times across different categories:
- Cabinets → Broken
- Windows → Broken
- Doors → Broken

**Status:** ✅ This is correct per the baseline specification. These are different contexts and should remain separate.

### SQL Verification

```sql
-- Category count
SELECT COUNT(*) FROM issue_categories;
-- Result: 19 ✅

-- Option count
SELECT COUNT(*) FROM issue_options;
-- Result: 131 ✅

-- Sample verification (Vermin)
SELECT array_agg(option_name ORDER BY display_order)
FROM issue_options io
JOIN issue_categories ic ON io.category_id = ic.id
WHERE ic.category_name = 'Vermin';
-- Result: {Rats/Mice,Skunks,Bats,Raccoons,Pigeons,Opossums} ✅

-- Sample verification (HVAC)
SELECT array_agg(option_name ORDER BY display_order)
FROM issue_options io
JOIN issue_categories ic ON io.category_id = ic.id
WHERE ic.category_name = 'HVAC';
-- Result: {Air Conditioner,Heater,Ventilation} ✅

-- Sample verification (Notices)
SELECT array_agg(option_name ORDER BY display_order)
FROM issue_options io
JOIN issue_categories ic ON io.category_id = ic.id
WHERE ic.category_name = 'Notices';
-- Result: {3-day,24-hour,30-day,60-day,To quit,Perform or quit} ✅
```

---

## Changes from Previous Version

### Comparison: Official Baseline vs. Previous Comprehensive Version

| Aspect | Previous (Comprehensive) | Official Baseline | Change |
|--------|-------------------------|-------------------|--------|
| **Categories** | 19 | 19 | No change |
| **Total Options** | 194 | 131 | -63 options |
| **Approach** | Comprehensive habitability taxonomy | Form-specific baseline | Simplified to match form |

### Key Differences

**Reduced specificity in favor of baseline matching:**

1. **Vermin:** 9 options → 6 options
   - Removed: Squirrels, Bedbugs, Other Vermin

2. **Insects:** 11 options → 10 options
   - Removed: Fleas, Other Insects

3. **HVAC:** 9 options → 3 options
   - Consolidated to: Air Conditioner, Heater, Ventilation

4. **Electrical:** 10 options → 7 options
   - Simplified to core issues

5. **Fire Hazard:** 9 options → 5 options
   - Focused on baseline issues only

6. **Plumbing:** 12 options → 8 options
   - Consolidated related issues

7. **Cabinets:** 8 options → 3 options
   - Simplified to: Broken, Hinges, Alignment

8. **Flooring:** 9 options → 4 options
   - Simplified to: Uneven, Carpet, Nails, Tiles

9. **Windows:** 9 options → 6 options
   - Matched baseline exactly

10. **Doors:** 10 options → 8 options
    - Matched baseline exactly

11. **Structure:** 14 options → 15 options
    - More specific waterproofing/weatherproofing options

12. **Common Areas:** 11 options → 16 options
    - Added more amenity-specific options

13. **Trash Problems:** 7 options → 2 options
    - Simplified to baseline

14. **Nuisance:** 9 options → 4 options
    - Core issues only

15. **Health Hazard:** 12 options → 8 options
    - Focused on baseline hazards

16. **Safety:** 11 options → 6 options
    - Matched baseline exactly

17. **Notices:** 10 options → 6 options
    - Notice types only (no communication methods)

---

## Files

### Created
1. **[official_baseline_taxonomy.sql](official_baseline_taxonomy.sql)** - Official normalization script
2. **[OFFICIAL_BASELINE_REPORT.md](OFFICIAL_BASELINE_REPORT.md)** - This report
3. **Backup files** (from previous normalization):
   - issue_categories_backup.csv
   - issue_options_backup.csv

### Source Documents
- **[Baseline Option.md](Baseline%20Option.md)** - Official baseline specification

---

## Usage

### Query All Categories with Options
```sql
SELECT
    ic.display_order,
    ic.category_name,
    array_agg(io.option_name ORDER BY io.display_order) as options
FROM issue_categories ic
LEFT JOIN issue_options io ON ic.id = io.category_id
GROUP BY ic.id, ic.category_name, ic.display_order
ORDER BY ic.display_order;
```

### Get Options for Specific Category
```sql
SELECT option_name
FROM issue_options io
JOIN issue_categories ic ON io.category_id = ic.id
WHERE ic.category_code = 'vermin'
ORDER BY io.display_order;
```

### Add Issue to Plaintiff
```sql
-- Get plaintiff and option IDs, then insert
INSERT INTO party_issue_selections (party_id, issue_option_id)
SELECT
    (SELECT id FROM parties WHERE case_id = 'case-uuid' AND party_number = 1),
    (SELECT io.id FROM issue_options io
     JOIN issue_categories ic ON io.category_id = ic.id
     WHERE ic.category_code = 'vermin' AND io.option_code = 'rats_mice');
```

---

## Next Steps

1. ✅ Official baseline taxonomy loaded
2. ⏭️ Update form HTML to match these exact 19 categories and 131 options
3. ⏭️ Create API endpoint to serve taxonomy dynamically
4. ⏭️ Update form submission handler to use official baseline
5. ⏭️ Test end-to-end form submission with baseline taxonomy

---

## Rollback (If Needed)

To restore the previous comprehensive version:
```bash
psql legal_forms < database/baseline_taxonomy.sql
```

To restore from CSV backups (requires custom import).

---

## Conclusion

✅ **Official baseline taxonomy successfully loaded**
✅ **19 categories, 131 options**
✅ **Exact match to Baseline Option.md**
✅ **Ready for form integration**

The taxonomy now precisely matches the official baseline specification and is ready for production use with the habitability discovery forms.

---

**Prepared by:** AI Assistant
**Date:** 2025-10-07
**Version:** Official Baseline v1.0
**Source:** database/Baseline Option.md
