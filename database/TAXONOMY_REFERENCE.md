# Discovery Issue Taxonomy - Quick Reference

## Overview
This document provides a complete reference of all standardized discovery issue categories and options in the Legal Form Application database.

**Total Categories:** 22
**Total Options:** 213
**Last Updated:** 2025-10-07

---

## Complete Category List

| # | Category | Code | Options | Type |
|---|----------|------|---------|------|
| 1 | Vermin | `vermin` | 10 | Multi-select |
| 2 | Insects | `insects` | 13 | Multi-select |
| 3 | HVAC | `hvac` | 9 | Multi-select |
| 4 | Electrical | `electrical` | 10 | Multi-select |
| 5 | Fire Hazard | `fire_hazard` | 9 | Multi-select |
| 6 | Appliances | `appliances` | 9 | Multi-select |
| 7 | Plumbing | `plumbing` | 12 | Multi-select |
| 8 | Cabinets | `cabinets` | 8 | Multi-select |
| 9 | Flooring | `flooring` | 9 | Multi-select |
| 10 | Windows | `windows` | 9 | Multi-select |
| 11 | Doors | `doors` | 10 | Multi-select |
| 12 | Structure | `structure` | 14 | Multi-select |
| 13 | Common Areas | `common_areas` | 11 | Multi-select |
| 14 | Trash Problems | `trash_problems` | 7 | Multi-select |
| 15 | Nuisance | `nuisance` | 9 | Multi-select |
| 16 | Health Hazard | `health_hazard` | 12 | Multi-select |
| 17 | Safety | `safety` | 15 | Multi-select |
| 18 | Notices | `notices` | 10 | Multi-select |
| 19 | Government Entities | `government_entities` | 15 | Multi-select |

---

## Detailed Options by Category

### 1. Vermin (10 options)
- Rats/Mice
- Bedbugs
- Squirrels
- Raccoons
- Opossums
- Bats
- Other Vermin
- *(3 additional from original seed)*

### 2. Insects (13 options)
- Roaches
- Ants
- Flies
- Mosquitoes
- Termites
- Wasps/Bees
- Fleas
- Spiders
- Other Insects
- *(4 additional from original seed)*

### 3. HVAC (9 options)
- No Heat
- Inadequate Heat
- No Air Conditioning
- Inadequate Air Conditioning
- Broken Thermostat
- Poor Ventilation
- HVAC System Noise
- Dirty/Unmaintained Filters
- Other HVAC Issues

### 4. Electrical (10 options)
- No Power
- Frequent Power Outages
- Broken Outlets
- Broken Light Switches
- Exposed Wiring
- Sparking Outlets/Switches
- Insufficient Outlets
- Flickering Lights
- Frequently Tripping Breakers
- Other Electrical Issues

### 5. Fire Hazard (9 options)
- No Smoke Detector
- Broken Smoke Detector
- No Carbon Monoxide Detector
- Broken Carbon Monoxide Detector
- No Fire Extinguisher
- Blocked Fire Exits
- Faulty Sprinkler System
- Improper Storage of Combustible Materials
- Other Fire Hazards

### 6. Appliances (9 options)
- Broken Stove/Oven
- Broken Refrigerator
- Broken Dishwasher
- Broken Microwave
- Broken Washing Machine
- Broken Dryer
- Broken Water Heater
- Broken Garbage Disposal
- Other Appliance Issues

### 7. Plumbing (12 options)
- No Hot Water
- No Running Water
- Low Water Pressure
- Leaking Pipes
- Clogged Drains
- Toilet Not Working
- Toilet Constantly Running
- Leaking Faucets
- Sewage Backup
- Rusty/Discolored Water
- Frozen Pipes
- Other Plumbing Issues

### 8. Cabinets (8 options)
- Broken Cabinet Doors
- Missing Cabinet Doors
- Broken Hinges
- Broken Handles/Knobs
- Damaged Shelving
- Water Damaged Cabinets
- Pest Damage to Cabinets
- Other Cabinet Issues

### 9. Flooring (9 options)
- Damaged Flooring
- Loose Flooring
- Uneven Floors
- Holes in Floor
- Water Damaged Flooring
- Severe Carpet Stains/Damage
- Missing Tiles
- Cracked Tiles
- Other Flooring Issues

### 10. Windows (9 options)
- Broken Windows
- Cracked Windows
- Windows Won't Open
- Windows Won't Close/Lock
- Drafty Windows
- Missing Window Screens
- Broken Window Locks
- Water Leaks Around Windows
- Other Window Issues

### 11. Doors (10 options)
- Broken Entry Door
- Door Won't Lock
- Broken Door Lock
- Missing Keys
- Door Won't Close Properly
- Broken Door Hinges
- Damaged Door Frame
- Drafty Doors
- Security Concerns with Door
- Other Door Issues

### 12. Structure (14 options)
- Roof Leaks
- Ceiling Damage
- Wall Damage
- Holes in Walls
- Cracks in Walls
- Foundation Issues
- Water Damage (Structural)
- Mold Growth
- Peeling/Chipping Paint
- Lead Paint
- Asbestos
- Sagging Ceiling
- Structural Instability
- Other Structural Issues

### 13. Common Areas (11 options)
- Broken/Unsafe Stairs
- Broken Railings
- Poor Lighting
- Dirty/Unmaintained Common Areas
- Broken Elevator
- Broken Intercom/Buzzer System
- Broken Mailboxes
- Laundry Room Issues
- Parking Issues
- Security Issues in Common Areas
- Other Common Area Issues

### 14. Trash Problems (7 options)
- Overflowing Trash
- No Trash Service
- Insufficient Trash Bins
- Trash Attracting Pests
- Illegal Dumping on Property
- Recycling Issues
- Other Trash Issues

### 15. Nuisance (9 options)
- Noise Disturbances
- Neighbor Harassment
- Landlord Harassment
- Illegal Entry by Landlord
- Privacy Violations
- Drug Activity on Property
- Criminal Activity on Property
- Excessive Odors
- Other Nuisance Issues

### 16. Health Hazard (12 options)
- Mold (Health Hazard)
- Lead Exposure
- Asbestos Exposure
- Radon
- Carbon Monoxide Leak
- Gas Leak
- Sewage Exposure
- Contaminated Water
- Pest Infestation (Health Risk)
- Unsanitary Conditions
- Excessive Allergen Exposure
- Other Health Hazards

### 17. Safety (15 options)
- Inadequate Locks
- No Deadbolt
- Broken Security System
- Inadequate Lighting
- Unsafe Stairs/Steps
- Trip Hazards
- Exposed Hazardous Materials
- Broken Security Gates/Doors
- Inadequate Fire Escape
- Dangerous Construction/Repairs
- Other Safety Issues
- *(4 additional from original seed)*

### 18. Notices (10 options)
**NEW - Unified into taxonomy**
- Verbal Notice to Landlord
- Written Notice to Landlord
- Email Notice to Landlord
- Certified Mail Notice
- Text Message Notice
- Online Portal Maintenance Request
- Emergency Notice
- No Response to Notice
- Landlord Aware But No Repair
- Other Notice Type

### 19. Government Entities (15 options)
**NEW - Unified into taxonomy**
- Local Housing Authority
- Housing Inspection Department
- Code Enforcement
- Health Department
- Building Department
- Fire Department
- Police Department
- Legal Aid Services
- Tenant Rights Organization
- Fair Housing Agency
- Housing Court
- Attorney General Office
- HUD (Housing and Urban Development)
- Rent Board/Commission
- Other Government Entity

---

## Usage Examples

### Query All Categories
```sql
SELECT * FROM issue_categories ORDER BY display_order;
```

### Query Options for a Specific Category
```sql
SELECT io.option_name
FROM issue_options io
JOIN issue_categories ic ON io.category_id = ic.id
WHERE ic.category_code = 'plumbing'
ORDER BY io.display_order;
```

### Find All Cases with Specific Issue
```sql
SELECT c.property_address, p.full_name
FROM cases c
JOIN parties p ON c.id = p.case_id
JOIN party_issue_selections pis ON p.id = pis.party_id
JOIN issue_options io ON pis.issue_option_id = io.id
WHERE io.option_code = 'mold_health';
```

### Get Issue Summary for a Case
```sql
SELECT
    ic.category_name,
    array_agg(io.option_name ORDER BY io.display_order) as selected_issues
FROM parties p
JOIN party_issue_selections pis ON p.id = pis.party_id
JOIN issue_options io ON pis.issue_option_id = io.id
JOIN issue_categories ic ON io.category_id = ic.id
WHERE p.case_id = 'your-case-uuid-here'
GROUP BY ic.id, ic.category_name
ORDER BY ic.display_order;
```

---

## API Integration

### Get All Categories and Options (for form rendering)
```javascript
// GET /api/taxonomy
// Returns all categories with nested options
{
  "categories": [
    {
      "code": "vermin",
      "name": "Vermin",
      "displayOrder": 1,
      "isMultiSelect": true,
      "options": [
        {"code": "rats_mice", "name": "Rats/Mice", "displayOrder": 1},
        {"code": "bedbugs", "name": "Bedbugs", "displayOrder": 2}
        // ...
      ]
    }
    // ...
  ]
}
```

### Submit Issues for Plaintiff
```javascript
// POST /api/cases/:caseId/plaintiffs/:plaintiffId/issues
{
  "issueOptionCodes": [
    "rats_mice",
    "mold_health",
    "no_heat"
  ]
}
```

---

## Maintenance

### Add New Category
```sql
INSERT INTO issue_categories (category_code, category_name, display_order)
VALUES ('new_category', 'New Category Name', 20);
```

### Add New Option to Existing Category
```sql
INSERT INTO issue_options (category_id, option_code, option_name, display_order)
SELECT id, 'new_option', 'New Option Name', 99
FROM issue_categories
WHERE category_code = 'existing_category';
```

### Deactivate (Soft Delete) an Option
```sql
UPDATE issue_options
SET is_active = false
WHERE option_code = 'deprecated_option';
```

---

## Notes

1. **Idempotent Design**: All insert statements use `ON CONFLICT` clauses - safe to re-run
2. **Soft Deletes**: Use `is_active` flag instead of deleting records
3. **Extensible**: Easy to add new categories/options without breaking existing data
4. **Unified Structure**: Notices and Government Entities use the same table structure as other issues
5. **Multi-select**: All categories currently support multiple selections

---

## Files
- Schema: [database/schema.sql](schema.sql)
- Seed Data: [database/seed_discovery_taxonomy.sql](seed_discovery_taxonomy.sql)
- Main Docs: [database/README.md](README.md)
